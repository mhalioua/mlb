<table class="table-bordered game-index">
	<thead>
		<tr style="background: lightgray;">
			<th scope="col"></th>
			<th scope="col" colspan="4"><%= @head %></th>
			<th scope="col">Pitchers</th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col" colspan="2">PITCHERS</th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col">70 AB's or<br/>more</th>
			<th scope="col">70 AB's or<br/>more</th>
			<th scope="col">70 AB's or<br/>more</th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col"></th>
			<th scope="col" colspan="3">Qualified Players Only</th>
			<th scope="col" colspan="2">IN PARK</th>
			<th scope="col" style="background: lightgray;">Hour 1</th>
			<th scope="col" style="background: lightgray;">Hour 2</th>
			<th scope="col" style="background: lightgray;">Hour 3</th>
			<th scope="col"></th>
		</tr>
	</thead>
	<tbody>
		<%
			@games.each_with_index do |game, index|
				@forecasts = game.weathers.where(station: "Forecast").order("updated_at DESC").limit(3)
				first_speed, first_dir = split_wind(@forecasts.last.wind)
				second_speed, second_dir = split_wind(@forecasts.second.wind)
				third_speed, third_dir = split_wind(@forecasts.first.wind)
				winds = wind_data_match(game.home_team.name, @forecasts.last.wind, @forecasts.second.wind, @forecasts.first.wind)
		%>
		<% if index % 3 === 0 %>
			<tr style="background: gray;">
				<td>TIME</td>
				<td>Away @ Home</td>
				<td>Game Stats</td>
				<td>Weather</td>
				<td>Previous Games</td>
				<%= render "starter_header" %>
				<td colspan="2">IN PARK with <br/>SPEED</td>
				<td colspan="3">Averages in park going <br/> this direction</td>
				<td></td>
			</tr>
		<% end %>
		<tr style="background: rgb(54,155,148);">
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td colspan="8"><%= game_link(game) %></td>
			<td colspan="12"><%= game_link(game) %></td>
			<td colspan="11"><%= game_link(game) %></td>
			<td colspan="5"><%= game_link(game) %></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr style="background: lightgray;">
			<td rowspan="4"><%= "#{(DateTime.parse(game.game_date) - game.home_team.timezone.hours).strftime("%I:%M%p")}" %></td>
			<td rowspan="4" style="background: lightgray;"><%= link_to game_link(game), { controller: "game", action: "new", id: game.id, forecast: 0, option: 0 } %></td>
			<td rowspan="4" style="background: lightgray;"><%= link_to "Stats", { controller: "game", action: "stats", id: game.id } %></td>
			<td rowspan="4" style="background: lightgray;"><%= link_to "Weather", { controller: "game", action: "weather", id: game.id, forecast: 0, option: 0} %></td>
			<td rowspan="4" style="background: lightgray;"><%= link_to "Previous Games", { controller: "game", action: "previous", id: game.id } %></td>
			<% pitcher = game.away_pitcher %>
			<% if pitcher %>
			<%= render partial: "starter", locals: { pitcher: pitcher } %>
			<% else %>
			<td rowspan="2">TBD</td>
			<%= render partial: "not_found", locals: {colspan: 32} %>
			<% end %>
			<td><%= winds[0][1] %></td>
			<td><%= winds[0][2] %></td>
			<td><%= first_dir %></td>
			<td><%= second_dir %></td>
			<td><%= third_dir %></td>
			<td>Direction</td>
		</tr>
		<tr style="background: lightgray;">
			<td colspan="2"><%= winds[0][3] %></td>
			<td><%= first_speed %></td>
			<td><%= second_speed %></td>
			<td><%= third_speed %></td>
			<td>Wind Speed</td>
		</tr>
		<tr style="background: lightgray;">
			<% pitcher = game.home_pitcher %>
			<% if pitcher %>
			<%= render partial: "starter", locals: { pitcher: pitcher } %>
			<% else %>
			<td rowspan="2">TBD</td>
			<%= render partial: "not_found", locals: {colspan: 32} %>
			<% end %>
			<td><%= winds[1][1] %></td>
			<td><%= winds[1][2] %></td>
			<td><%= winds.size > 2 ? winds[3][1] : 0 %></td>
			<td><%= winds.size > 2 ? winds[4][1] : 0 %></td>
			<td><%= winds.size > 2 ? winds[5][1] : 0 %></td>
			<td>Averages</td>
		</tr>
		<tr style="background: lightgray;">
			<td colspan="2"><%= winds[1][3] %></td>
			<td><%= winds.size > 2 ? winds[3][3] : 0 %></td>
			<td><%= winds.size > 2 ? winds[4][3] : 0 %></td>
			<td><%= winds.size > 2 ? winds[5][3] : 0 %></td>
			<td>Count</td>
		</tr>
		<% end %>
		<tr style="background: gray;">
			<td>TIME</td>
			<td>Away @ Home</td>
			<td>Game Stats</td>
			<td>Weather</td>
			<td>Previous Games</td>
			<%= render "starter_header" %>
			<td colspan="2">IN PARK with <br/>SPEED</td>
			<td colspan="3">Averages in park going <br/> this direction</td>
			<td></td>
		</tr>
	</tbody>
</table>